def get_fs_struct(fs: str) -> dict:
    """Retrieve the data structure for the specified financial statement."""
    if fs == "balance_sheet":
        return fs_structures["balance_sheet"]
    elif fs == "income_statement":
        return fs_structures["income_statement"]
    elif fs == "cash_flow":
        return fs_structures["cash_flow"]
    elif fs == "equity":
        return fs_structures["equity"]
    elif fs == "all":
        return fs_structures
    else:
        raise ValueError(f"Unknown financial statement type: {fs}")


def get_slack_name() -> str:
    """Get the name of the slack term used in balance sheet predictions."""
    return fs_structures["balance_sheet"]["slack_term"]


fs_structures = {
    "balance_sheet": {
        "prediction_structure": {
            "Assets": {
                "Current": {
                    "Cash and Equivalents": [],
                    "Receivables": [],
                    "Inventory": [],
                    "Prepaid and Other Current Assets": [],
                    "Marketable Securities (Short-term)": [],
                    "Total Current Assets": [],
                },
                "Non-Current": {
                    "Property, Plant, and Equipment (net)": [],
                    "Intangible Assets (net)": [],
                    "Goodwill": [],
                    "Long-term Investments": [],
                    "Deferred Tax Assets": [],
                    "Other Non-Current Assets": [],
                    "Total Non-Current Assets": [],
                },
                "Total Assets": [],
            },
            "Liabilities": {
                "Current": {
                    "Accounts Payable and Accrued Expenses": [],
                    "Short-term Debt": [],
                    "Deferred Revenue": [],
                    "Other Current Liabilities": [],
                    "Total Current Liabilities": [],
                },
                "Non-Current": {
                    "Long-term Debt": [],
                    "Deferred Tax Liabilities": [],
                    "Lease Liabilities": [],
                    "Other Non-Current Liabilities": [],
                    "Total Non-Current Liabilities": [],
                },
                "Total Liabilities": [],
            },
            "Equity": {
                "Common Stock and APIC": [],
                "Retained Earnings": [],
                "Treasury Stock": [],
                "Accumulated Other Comprehensive Income": [],
                "Total Equity": [],
            },
            "Totals": {
                "Total Liabilities and Equity": [],
            },
            "__unmapped__": [],
        },
        "slack_term": "Accumulated Other Comprehensive Income",
        "drop_summations": [
            "Total Current Assets",
            "Total Non-Current Assets",
            "Total Assets",
            "Total Current Liabilities",
            "Total Non-Current Liabilities",
            "Total Liabilities",
            "Total Equity",
            "Total Liabilities and Equity",
        ],
        "mapping_examples": {
            "Cash and Equivalents": [
                "Cash and Cash Equivalents",
                "Cash",
                "Cash Equivalents",
                "Restricted Cash (Current)",
                "Restricted Cash and Cash Equivalents (Current)",
                "Cash, Cash Equivalents and Restricted Cash",
            ],
            "Receivables": [
                "Accounts Receivable",
                "Accounts Receivable, Net",
                "Trade Receivables",
                "Receivables",
                "Accounts Receivable, Net of Allowances",
                "Allowance for Doubtful Accounts",
                "Allowance for Credit Losses",
                "Notes Receivable (Current)",
                "Unbilled Receivables",
            ],
            "Inventory": [
                "Inventory",
                "Inventories",
                "Inventories, Net",
                "Raw Materials",
                "Work in Process",
                "Finished Goods",
                "Merchandise Inventory",
            ],
            "Prepaid and Other Current Assets": [
                "Prepaid Expenses",
                "Prepaid Expenses and Other Current Assets",
                "Other Current Assets",
                "Prepaid Assets",
                "Derivative Assets (Current)",
                "Income Tax Receivable",
                "Prepaid Income Taxes",
                "Other Receivables (Current)",
            ],
            "Marketable Securities (Short-term)": [
                "Marketable Securities",
                "Short-term Investments",
                "Marketable Securities (Current)",
                "Available-for-Sale Securities (Current)",
                "Trading Securities",
                "Debt Securities (Current)",
            ],
            "Total Current Assets": [
                "Total Current Assets",
                "Current Assets",
            ],
            "Property, Plant, and Equipment (net)": [
                "Property, Plant and Equipment, Net",
                "Property and Equipment, Net",
                "PP&E, Net",
                "Property, Plant and Equipment (gross)",
                "Accumulated Depreciation",
                "Accumulated Depreciation and Amortization",
                "Land",
                "Buildings",
                "Machinery and Equipment",
                "Furniture and Fixtures",
                "Leasehold Improvements",
                "Construction in Progress",
            ],
            "Intangible Assets (net)": [
                "Intangible Assets, Net",
                "Intangible Assets",
                "Intangible Assets (gross)",
                "Accumulated Amortization",
                "Developed Technology",
                "Customer Relationships",
                "Patents",
                "Trademarks",
                "Trade Names",
                "Licenses",
                "Software",
                "Capitalized Software Development Costs",
            ],
            "Goodwill": [
                "Goodwill",
            ],
            "Long-term Investments": [
                "Long-term Investments",
                "Marketable Securities (Non-current)",
                "Available-for-Sale Securities (Non-current)",
                "Equity Method Investments",
                "Investments in Affiliates",
                "Held-to-Maturity Securities",
                "Strategic Investments",
            ],
            "Deferred Tax Assets": [
                "Deferred Tax Assets",
                "Deferred Income Taxes (Non-current Asset)",
                "Net Deferred Tax Assets",
            ],
            "Other Non-Current Assets": [
                "Other Non-Current Assets",
                "Other Long-term Assets",
                "Operating Lease Right-of-Use Assets",
                "Finance Lease Right-of-Use Assets",
                "Restricted Cash (Non-current)",
                "Long-term Prepaid Expenses",
                "Derivative Assets (Non-current)",
                "Notes Receivable (Non-current)",
                "Deposits",
                "Deferred Charges",
            ],
            "Total Non-Current Assets": [
                "Total Non-Current Assets",
                "Non-Current Assets",
                "Total Long-term Assets",
            ],
            "Total Assets": [
                "Total Assets",
            ],
            "Accounts Payable and Accrued Expenses": [
                "Accounts Payable",
                "Accrued Expenses",
                "Accrued Liabilities",
                "Accounts Payable and Accrued Expenses",
                "Accrued Expenses and Other Current Liabilities",
                "Accrued Compensation",
                "Accrued Payroll",
                "Accrued Employee Benefits",
                "Accrued Interest",
                "Accrued Taxes",
                "Trade Payables",
            ],
            "Short-term Debt": [
                "Short-term Debt",
                "Short-term Borrowings",
                "Current Portion of Long-term Debt",
                "Current Maturities of Long-term Debt",
                "Notes Payable (Current)",
                "Commercial Paper",
                "Line of Credit (Current)",
                "Current Portion of Finance Lease Liabilities",
            ],
            "Deferred Revenue": [
                "Deferred Revenue",
                "Deferred Revenue (Current)",
                "Unearned Revenue",
                "Contract Liabilities (Current)",
                "Customer Deposits",
                "Advance Payments",
            ],
            "Other Current Liabilities": [
                "Other Current Liabilities",
                "Income Taxes Payable",
                "Current Tax Liabilities",
                "Derivative Liabilities (Current)",
                "Dividends Payable",
                "Current Portion of Operating Lease Liabilities",
                "Warranty Liabilities (Current)",
                "Restructuring Liabilities (Current)",
                "Contingent Consideration (Current)",
            ],
            "Total Current Liabilities": [
                "Total Current Liabilities",
                "Current Liabilities",
            ],
            "Long-term Debt": [
                "Long-term Debt",
                "Long-term Borrowings",
                "Long-term Debt, Net of Current Portion",
                "Notes Payable (Non-current)",
                "Senior Notes",
                "Bonds Payable",
                "Convertible Debt",
                "Finance Lease Liabilities (Non-current)",
                "Debt Issuance Costs",
            ],
            "Deferred Tax Liabilities": [
                "Deferred Tax Liabilities",
                "Deferred Income Taxes (Non-current Liability)",
                "Net Deferred Tax Liabilities",
            ],
            "Lease Liabilities": [
                "Operating Lease Liabilities (Non-current)",
                "Lease Liabilities (Non-current)",
                "Long-term Lease Obligations",
            ],
            "Other Non-Current Liabilities": [
                "Other Non-Current Liabilities",
                "Other Long-term Liabilities",
                "Pension Liabilities",
                "Post-retirement Benefits",
                "Asset Retirement Obligations",
                "Environmental Liabilities",
                "Deferred Revenue (Non-current)",
                "Contract Liabilities (Non-current)",
                "Derivative Liabilities (Non-current)",
                "Warranty Liabilities (Non-current)",
                "Contingent Consideration (Non-current)",
                "Long-term Deferred Compensation",
            ],
            "Total Non-Current Liabilities": [
                "Total Non-Current Liabilities",
                "Non-Current Liabilities",
                "Total Long-term Liabilities",
            ],
            "Total Liabilities": [
                "Total Liabilities",
            ],
            "Common Stock": [
                "Common Stock",
                "Common Shares",
                "Ordinary Shares",
                "Common Stock, Par Value",
                "Common Stock, Shares Issued",
                "Common Stock, Shares Outstanding",
            ],
            "Additional Paid-in Capital": [
                "Additional Paid-in Capital",
                "Paid-in Capital",
                "Capital in Excess of Par Value",
                "Share Premium",
                "Contributed Capital",
            ],
            "Retained Earnings": [
                "Retained Earnings",
                "Accumulated Earnings",
                "Accumulated Deficit",
                "Retained Earnings (Deficit)",
            ],
            "Treasury Stock": [
                "Treasury Stock",
                "Treasury Shares",
                "Repurchased Stock",
            ],
            "Accumulated Other Comprehensive Income": [
                "Accumulated Other Comprehensive Income",
                "Accumulated Other Comprehensive Income (Loss)",
                "AOCI",
                "Foreign Currency Translation Adjustment",
                "Unrealized Gains (Losses) on Securities",
                "Pension Adjustments",
                "Unrealized Gains (Losses) on Derivatives",
            ],
            "Total Equity": [
                "Total Equity",
                "Total Stockholders' Equity",
                "Total Shareholders' Equity",
                "Stockholders' Equity",
                "Shareholders' Equity",
                "Total Equity Attributable to Shareholders",
                "Noncontrolling Interest",
                "Minority Interest",
                "Preferred Stock",
            ],
            "Total Liabilities and Equity": [
                "Total Liabilities and Equity",
                "Total Liabilities and Stockholders' Equity",
                "Total Liabilities and Shareholders' Equity",
            ],
        },
        "classification_guidelines": {
            "General Rules": [
                "Map line items to the most specific applicable category",
                "Prefer specific categories over 'Other' categories",
                "Net amounts (e.g., 'PP&E, net') belong in the primary category",
                "Contra-accounts (allowances, accumulated depreciation) map to primary",
                "Use __unmapped__ only when truly ambiguous",
            ],
            "Specific Mappings": {
                "Cash and Equivalents": (
                    "Includes: cash, restricted cash, money market",
                ),
                "Receivables": (
                    "Includes: A/R (gross or net), allowance, trade receivables",
                ),
                "Property, Plant, and Equipment": (
                    "Includes: PP&E, depreciation, land",
                ),
                "Intangible Assets": (
                    "Includes: patents, tech, amortization. NOT goodwill",
                ),
                "Short-term Debt": (
                    "Current portion of LT debt, notes payable < 1 year",
                ),
                "Accounts Payable and Accrued Expenses": (
                    "AP, accrued comp/interest/taxes",
                ),
                "Other Current Assets": (
                    "Catch-all: prepaid, derivatives, tax receivable",
                ),
                "Other Non-Current Assets": ("Catch-all: ROU, LT prepaid, deposits",),
            },
            "Edge Cases": {
                "Deferred Revenue": "Current/non-current based on label, else current",
                "Lease Liabilities": "Non-current only. Current → Other Current Liab",
                "Preferred Stock": "If material (>5%), ask user. Else → Common Stock",
                "Share Counts": "shares issued/outstanding/authorized → __unmapped__",
            },
            "Rollup Detection": {
                "Combined line items": [
                    "If feature has multiple concepts via 'and'/spaces, check input",
                    "If components exist separately → __unmapped__ (no dupe)",
                    "Common patterns: 'X and Y', 'X Y and Z', 'X including Y'",
                ],
                "Examples": [
                    "'cash cash equiv and ST invest' → __unmapped__ if both exist",
                    "'revenue product and service' → __unmapped__ if both exist",
                    "'current assets incl discontinued' → __unmapped__ if exists",
                ],
            },
        },
    },
    "income_statement": {
        "prediction_structure": {
            "Revenues": {
                "Total Revenues": [],
            },
            "Cost of Revenue": {
                "Total Cost of Revenue": [],
            },
            "Gross Profit": [],
            "Operating Expenses": {
                "Research and Development": [],
                "Sales and Marketing": [],
                "General and Administrative": [],
                "Depreciation and Amortization": [],
                "Other Operating Expenses": [],
                "Total Operating Expenses": [],
            },
            "Operating Income": [],
            "Non-Operating Items": {
                "Interest Income": [],
                "Interest Expense": [],
                "Other Income (Expense)": [],
                "Total Non-Operating Items": [],
            },
            "Income Before Taxes": [],
            "Income Tax Expense": [],
            "Net Income": [],
            "Other Comprehensive Income": [],
            "Comprehensive Income": [],
            "Per-Share Data": {
                "Basic EPS": [],
                "Diluted EPS": [],
                "Weighted Average Shares Outstanding (Basic)": [],
                "Weighted Average Shares Outstanding (Diluted)": [],
            },
            "__unmapped__": [],
        },
        "drop_summations": [
            "Basic EPS",
            "Diluted EPS",
            "Weighted Average Shares Outstanding (Basic)",
            "Weighted Average Shares Outstanding (Diluted)",
            "Other Comprehensive Income",
            "Comprehensive Income",
        ],
        "mapping_examples": {
            "Total Revenues": [
                "Revenue",
                "Net Sales",
                "Total Revenue",
                "Total Net Sales",
                "Product Revenue",
                "Service Revenue",
                "Sales",
            ],
            "Total Cost of Revenue": [
                "Cost of Revenue",
                "Cost of Sales",
                "Cost of Goods Sold",
                "Cost of Products",
                "Cost of Services",
                "COGS",
            ],
            "Gross Profit": [
                "Gross Profit",
                "Gross Margin",
                "Gross Income",
            ],
            "Research and Development": [
                "Research and Development",
                "R&D",
                "Research and Development Expenses",
                "Product Development",
                "Engineering",
            ],
            "Sales and Marketing": [
                "Sales and Marketing",
                "Selling and Marketing",
                "Selling Expenses",
                "Sales",
                "Marketing",
                "Advertising",
                "Sales and Distribution",
            ],
            "General and Administrative": [
                "General and Administrative",
                "G&A",
                "Administrative Expenses",
                "SG&A",
                "Selling, General and Administrative",
            ],
            "Depreciation and Amortization": [
                "Depreciation and Amortization",
                "D&A",
                "Amortization",
                "Depreciation",
                "Amortization of Intangibles",
            ],
            "Other Operating Expenses": [
                "Other Operating Expenses",
                "Restructuring Charges",
                "Impairment Charges",
                "Stock-Based Compensation",
                "Litigation Expenses",
                "Asset Write-downs",
            ],
            "Total Operating Expenses": [
                "Total Operating Expenses",
                "Operating Expenses",
                "Total Costs and Expenses",
            ],
            "Operating Income": [
                "Operating Income",
                "Operating Income (Loss)",
                "Income from Operations",
                "Operating Profit",
                "EBIT",
                "Operating Earnings",
            ],
            "Interest Income": [
                "Interest Income",
                "Interest and Investment Income",
                "Investment Income",
            ],
            "Interest Expense": [
                "Interest Expense",
                "Interest Costs",
                "Finance Costs",
                "Interest and Other Finance Costs",
            ],
            "Other Income (Expense)": [
                "Other Income (Expense)",
                "Other Income",
                "Other Expense",
                "Gain (Loss) on Sale of Assets",
                "Gain on Investments",
                "Foreign Exchange Gain (Loss)",
                "Equity in Earnings of Affiliates",
                "Net Interest Income (Expense)",
            ],
            "Total Non-Operating Items": [
                "Total Non-Operating Income (Expense)",
                "Non-Operating Income (Expense)",
                "Nonoperating Income Expense",
                "Other Income and Expense",
            ],
            "Income Before Taxes": [
                "Income Before Taxes",
                "Income Before Income Taxes",
                "Pretax Income",
                "EBT",
                "Earnings Before Taxes",
                "Income from Continuing Operations Before Income Taxes",
                "Income Loss from Continuing Operations Before Income Taxes",
            ],
            "Income Tax Expense": [
                "Income Tax Expense",
                "Income Tax Provision",
                "Provision for Income Taxes",
                "Tax Expense",
            ],
            "Net Income": [
                "Net Income",
                "Net Income (Loss)",
                "Net Earnings",
                "Profit",
                "Net Profit",
                "Income from Continuing Operations",
                "Net Income Attributable to Common Shareholders",
            ],
            "Other Comprehensive Income": [
                "Other Comprehensive Income",
                "OCI",
                "Foreign Currency Translation Adjustments",
                "Unrealized Gains (Losses) on Securities",
            ],
            "Comprehensive Income": [
                "Comprehensive Income",
                "Total Comprehensive Income",
                "Comprehensive Income (Loss)",
            ],
            "Basic EPS": [
                "Basic Earnings Per Share",
                "Basic EPS",
                "Earnings Per Share - Basic",
                "EPS - Basic",
            ],
            "Diluted EPS": [
                "Diluted Earnings Per Share",
                "Diluted EPS",
                "Earnings Per Share - Diluted",
                "EPS - Diluted",
            ],
            "Weighted Average Shares Outstanding (Basic)": [
                "Weighted Average Shares Outstanding - Basic",
                "Weighted Average Common Shares - Basic",
                "Basic Shares Outstanding",
            ],
            "Weighted Average Shares Outstanding (Diluted)": [
                "Weighted Average Shares Outstanding - Diluted",
                "Weighted Average Common Shares - Diluted",
                "Diluted Shares Outstanding",
            ],
        },
        "classification_guidelines": {
            "General Rules": [
                "Map to most specific category; prefer specific over 'Other'",
                "Revenue: match by nature (product/service), not customer segment",
                "Combined items (e.g., 'SG&A') → dominant component",
                "Non-GAAP metrics go to __unmapped__ unless clearly mappable",
            ],
            "Specific Mappings": {
                "Total Revenues": "Sum all revenue types (product, service, other)",
                "Total Cost of Revenue": "Direct costs ONLY. Excludes fulfillment",
                "Sales and Marketing": "Commissions, advertising, trade shows",
                "General and Administrative": "Corporate overhead: HR, legal, finance",
                "Other Operating Expenses": "Fulfillment, stock comp, restructuring",
                "Interest Income": "Only interest earned; exclude investment gains",
                "Interest Expense": "Debt interest only; exclude other finance costs",
                "Other Income (Expense)": (
                    "Gains/losses, FX, equity method, asset sales"
                ),
            },
            "Edge Cases": {
                "SG&A": "If combined, map to General and Administrative",
                "Net Interest Income/Expense": "If net → Other Income (Expense)",
                "Discontinued Operations": "→ __unmapped__ (non-recurring)",
                "Noncontrolling Interest": "→ __unmapped__ (consolidation adj)",
                "Preferred Dividends": "→ __unmapped__ or subtract from Net Income",
                "Long verbose names": [
                    "Map based on KEY TERMS, not exact matches",
                    "'before income taxes'/'pretax' → Income Before Taxes",
                    "'technology' + 'infrastructure' → R&D",
                    "Ignore modifiers like 'minority interest', 'excluding...'",
                ],
            },
            "Rollup Detection": {
                "Combined line items": [
                    "If feature has multiple categories (e.g., 'costs and expenses')",
                    "check if categories exist separately → __unmapped__",
                    "Common rollups: 'costs and expenses', 'total costs'",
                ],
                "Examples": [
                    "'costs and expenses' → __unmapped__ if COGS/OpEx exist",
                    "'total operating costs' → __unmapped__ if items exist",
                    "'revenue product and service' → __unmapped__ if both exist",
                ],
                "Exceptions": [
                    "'total X' matching category names → map to Total category",
                    "'before taxes'/'pretax' are NOT rollups → Income Before Taxes",
                ],
            },
        },
    },
    "cash_flow": {
        "prediction_structure": {
            "Operating Activities": {
                "Net Income": [],
                "Depreciation and Amortization": [],
                "Stock-Based Compensation": [],
                "Deferred Income Taxes": [],
                "Other Non-Cash Items": [],
                "Changes in Operating Assets and Liabilities": [],
                "Net Cash from Operating Activities": [],
                "Interest Paid": [],
            },
            "Investing Activities": {
                "Capital Expenditures": [],
                "Acquisitions (net of cash acquired)": [],
                "Purchases of Investments": [],
                "Sales and Maturities of Investments": [],
                "Other Investing Activities": [],
                "Net Cash from Investing Activities": [],
            },
            "Financing Activities": {
                "Proceeds from Debt": [],
                "Repayment of Debt": [],
                "Proceeds from Stock Issuance": [],
                "Stock Repurchases": [],
                "Dividends Paid": [],
                "Other Financing Activities": [],
                "Net Cash from Financing Activities": [],
            },
            "Effect of Exchange Rate Changes": [],
            "Net Change in Cash": [],
            "Cash at Beginning of Period": [],
            "Cash at End of Period": [],
            "__unmapped__": [],
        },
        "drop_summations": [],
        "mapping_examples": {
            "Net Income": [
                "Net Income",
                "Net Income (Loss)",
                "Net Earnings",
                "Net Income Available to Common Shareholders",
            ],
            "Depreciation and Amortization": [
                "Depreciation and Amortization",
                "D&A",
                "Depreciation",
                "Amortization",
                "Amortization of Intangible Assets",
            ],
            "Stock-Based Compensation": [
                "Stock-Based Compensation",
                "Stock-Based Compensation Expense",
                "Share-Based Compensation",
                "Equity Compensation",
            ],
            "Deferred Income Taxes": [
                "Deferred Income Taxes",
                "Deferred Tax Expense",
                "Provision for Deferred Taxes",
            ],
            "Other Non-Cash Items": [
                "Other Non-Cash Items",
                "Impairment Charges",
                "Asset Write-downs",
                "Gain (Loss) on Sale of Assets",
                "Gain (Loss) on Investments",
                "Unrealized Gains (Losses)",
                "Equity in Earnings of Affiliates",
                "Accretion Expense",
            ],
            "Changes in Operating Assets and Liabilities": [
                "Changes in Operating Assets and Liabilities",
                "Changes in Working Capital",
                "Accounts Receivable",
                "Increase (Decrease) in Accounts Receivable",
                "Inventory",
                "Increase (Decrease) in Inventory",
                "Accounts Payable",
                "Increase (Decrease) in Accounts Payable",
                "Accrued Expenses",
                "Prepaid Expenses",
                "Deferred Revenue",
                "Other Assets and Liabilities",
            ],
            "Net Cash from Operating Activities": [
                "Net Cash Provided by Operating Activities",
                "Net Cash from Operating Activities",
                "Cash Flows from Operating Activities",
                "Net Cash Provided by (Used in) Operating Activities",
            ],
            "Capital Expenditures": [
                "Capital Expenditures",
                "CapEx",
                "Purchases of PP&E",
                "Purchases of Property and Equipment",
                "Additions to Property, Plant and Equipment",
                "Purchase of Property, Plant, and Equipment",
            ],
            "Acquisitions (net of cash acquired)": [
                "Acquisitions",
                "Business Acquisitions",
                "Acquisitions, Net of Cash Acquired",
                "Cash Paid for Acquisitions",
                "Payments for Acquisitions",
            ],
            "Purchases of Investments": [
                "Purchases of Investments",
                "Purchase of Marketable Securities",
                "Purchases of Available-for-Sale Securities",
                "Investment Purchases",
            ],
            "Sales and Maturities of Investments": [
                "Sales of Investments",
                "Maturities of Investments",
                "Sales and Maturities of Marketable Securities",
                "Proceeds from Sale of Investments",
                "Proceeds from Maturities of Securities",
            ],
            "Other Investing Activities": [
                "Other Investing Activities",
                "Proceeds from Sale of PP&E",
                "Proceeds from Sale of Assets",
                "Loans to Affiliates",
                "Collection of Loans",
            ],
            "Net Cash from Investing Activities": [
                "Net Cash Used in Investing Activities",
                "Net Cash from Investing Activities",
                "Cash Flows from Investing Activities",
                "Net Cash Provided by (Used in) Investing Activities",
            ],
            "Proceeds from Debt": [
                "Proceeds from Debt",
                "Proceeds from Issuance of Debt",
                "Proceeds from Borrowings",
                "Proceeds from Long-term Debt",
                "Proceeds from Short-term Debt",
                "Debt Issuance",
            ],
            "Repayment of Debt": [
                "Repayment of Debt",
                "Debt Repayments",
                "Repayments of Borrowings",
                "Payment of Long-term Debt",
                "Repayment of Short-term Debt",
            ],
            "Proceeds from Stock Issuance": [
                "Proceeds from Issuance of Common Stock",
                "Proceeds from Stock Issuance",
                "Proceeds from Exercise of Stock Options",
                "Issuance of Common Stock",
            ],
            "Stock Repurchases": [
                "Stock Repurchases",
                "Repurchase of Common Stock",
                "Treasury Stock Purchases",
                "Share Buybacks",
                "Payment for Repurchase of Common Stock",
            ],
            "Dividends Paid": [
                "Dividends Paid",
                "Cash Dividends Paid",
                "Payment of Dividends",
            ],
            "Other Financing Activities": [
                "Other Financing Activities",
                "Payment of Finance Lease Liabilities",
                "Proceeds from Sale-Leaseback",
                "Taxes Paid Related to Net Share Settlement",
                "Payment of Contingent Consideration",
            ],
            "Net Cash from Financing Activities": [
                "Net Cash Provided by Financing Activities",
                "Net Cash from Financing Activities",
                "Cash Flows from Financing Activities",
                "Net Cash Provided by (Used in) Financing Activities",
            ],
            "Effect of Exchange Rate Changes": [
                "Effect of Exchange Rate Changes on Cash",
                "Foreign Exchange Effect on Cash",
                "Effect of Foreign Currency Exchange Rates",
            ],
            "Net Change in Cash": [
                "Net Increase (Decrease) in Cash",
                "Net Change in Cash and Cash Equivalents",
                "Change in Cash",
            ],
            "Cash at Beginning of Period": [
                "Cash and Cash Equivalents at Beginning of Period",
                "Cash at Beginning of Year",
                "Beginning Cash Balance",
            ],
            "Cash at End of Period": [
                "Cash and Cash Equivalents at End of Period",
                "Cash at End of Year",
                "Ending Cash Balance",
            ],
            "Interest Paid": [
                "Interest Paid",
                "Interest Paid Net",
                "Cash Paid for Interest",
                "Interest Paid on Debt",
            ],
        },
        "classification_guidelines": {
            "General Rules": [
                "Direct method rare - most use indirect starting with Net Income",
                "Asset increases = cash outflows; decreases = inflows",
                "Liability increases = cash inflows; decreases = outflows",
                "Signs often reversed in EDGAR - focus on line item name",
            ],
            "Specific Mappings": {
                "Net Income": "Starting point for indirect method CFO",
                "Changes in Operating Assets and Liabilities": "Sum working capital",
                "Other Non-Cash Items": "Impairments, gains/losses, equity method",
                "Capital Expenditures": "Negative (outflow) - fixed asset purchases",
                "Acquisitions (net of cash acquired)": "Business combos only",
                "Proceeds from Debt": "Cash received from new borrowings",
                "Repayment of Debt": "Cash paid to reduce debt principal",
                "Stock Repurchases": "Treasury stock purchases, buybacks",
            },
            "Edge Cases": {
                "Supplemental Disclosures": "Interest/taxes paid → __unmapped__",
                "Individual Working Capital Items": "Sum into Changes in Op Assets",
                "Net Debt Proceeds": "Split if possible, else → Proceeds from Debt",
                "Free Cash Flow": "Non-GAAP metric → __unmapped__",
                "Restricted Cash": "Include only if part of Cash and Equivalents",
            },
            "Sign Conventions": {
                "Operating": "Net income +, depreciation +, A/R increase -, A/P +",
                "Investing": "CapEx -, asset sales +, investment purchases -",
                "Financing": "Debt proceeds +, repayment -, issuance +, dividends -",
            },
        },
    },
    "equity": {
        "prediction_structure": {
            "Beginning Balance": {
                "Common Stock": [],
                "Additional Paid-in Capital": [],
                "Retained Earnings": [],
                "Accumulated Other Comprehensive Income": [],
                "Treasury Stock": [],
                "Total Equity": [],
            },
            "Net Income": [],
            "Other Comprehensive Income": {
                "Foreign Currency Translation": [],
                "Unrealized Gains/Losses on Securities": [],
                "Derivatives and Hedging": [],
                "Other OCI": [],
                "Total Other Comprehensive Income": [],
            },
            "Comprehensive Income": [],
            "Dividends Declared": [],
            "Dividends Paid": [],
            "Stock Issuance": {
                "Stock-Based Compensation": [],
                "Exercise of Stock Options": [],
                "Other Stock Issuance": [],
                "Total Stock Issuance Value": [],
            },
            "Stock Repurchases": [],
            "Tax Effects from Stock Compensation": [],
            "Other Equity Adjustments": [],
            "Ending Balance": {
                "Common Stock": [],
                "Additional Paid-in Capital": [],
                "Retained Earnings": [],
                "Accumulated Other Comprehensive Income": [],
                "Treasury Stock": [],
                "Total Equity": [],
            },
            "__unmapped__": [],
        },
        "drop_summations": [],
        "mapping_examples": {
            "Net Income": [
                "Net Income",
                "Net Income (Loss)",
                "Net Income Attributable to Parent",
            ],
            "Foreign Currency Translation": [
                "Foreign Currency Translation Adjustment",
                "Other Comprehensive Income Loss Foreign Currency",
                "Currency Translation Adjustment",
            ],
            "Unrealized Gains/Losses on Securities": [
                "Unrealized Gains (Losses) on Securities",
                "Other Comprehensive Income Unrealized Holding Gain Loss",
                "Available-for-Sale Securities Adjustment",
            ],
            "Derivatives and Hedging": [
                "Derivatives Qualifying as Hedges",
                "Cash Flow Hedges",
                "Other Comprehensive Income Derivatives",
            ],
            "Total Other Comprehensive Income": [
                "Other Comprehensive Income (Loss)",
                "Total Other Comprehensive Income Net of Tax",
            ],
            "Comprehensive Income": [
                "Comprehensive Income",
                "Comprehensive Income Net of Tax",
                "Total Comprehensive Income",
            ],
            "Dividends Declared": [
                "Dividends Declared",
                "Common Stock Dividends Declared",
                "Cash Dividends Declared",
            ],
            "Dividends Paid": [
                "Dividends Paid",
                "Dividends Common Stock Cash",
                "Cash Dividends Paid",
                "Payment of Dividends",
            ],
            "Stock-Based Compensation": [
                "Stock-Based Compensation",
                "Adjustments to Additional Paid in Capital Sharebased Compensation",
                "Share-Based Compensation Expense",
                "Equity Compensation",
            ],
            "Exercise of Stock Options": [
                "Proceeds from Stock Options Exercised",
                "Stock Issued During Period Value New Issues",
                "Issuance of Common Stock",
            ],
            "Stock Repurchases": [
                "Stock Repurchased and Retired",
                "Treasury Stock Purchases",
                "Repurchase of Common Stock",
                "Share Buybacks",
            ],
            "Tax Effects from Stock Compensation": [
                "Adjustment to Additional Paid in Capital Income Tax Effect",
                "Tax Benefit from Stock-Based Compensation",
                "Excess Tax Benefit from Share-Based Compensation",
            ],
            "Common Stock": [
                "Common Stock Value",
                "Common Stock Par Value",
            ],
            "Additional Paid-in Capital": [
                "Additional Paid-in Capital",
                "APIC",
                "Capital in Excess of Par",
            ],
            "Retained Earnings": [
                "Retained Earnings",
                "Accumulated Deficit",
            ],
            "Accumulated Other Comprehensive Income": [
                "Accumulated Other Comprehensive Income",
                "AOCI",
                "Accumulated Other Comprehensive Loss",
            ],
            "Treasury Stock": [
                "Treasury Stock",
                "Treasury Stock at Cost",
            ],
            "Total Equity": [
                "Total Stockholders' Equity",
                "Total Equity",
                "Stockholders' Equity",
            ],
            "Other Equity Adjustments": [
                "Stockholders Equity Other",
                "Other Changes in Equity",
                "Adoption of New Accounting Standards",
                "Cumulative Effect of Accounting Change",
            ],
        },
        "classification_guidelines": {
            "General Rules": [
                "Equity statement shows changes in equity accounts over period",
                "Debits decrease equity, credits increase equity",
                "Net Income flows to Retained Earnings",
                "OCI bypasses income statement but affects equity",
            ],
            "Specific Mappings": {
                "Net Income": "Links to income statement net income",
                "Dividends Paid": "Reduces retained earnings (cash outflow)",
                "Stock Repurchases": "Reduces equity \
                    (typically increases treasury stock)",
                "Stock-Based Compensation": "Increases APIC (non-cash)",
                "Comprehensive Income": "Net Income + OCI",
            },
            "Edge Cases": {
                "Dividends per Share": "Supplemental info → __unmapped__",
                "Shares Outstanding": "Share count not dollar value → __unmapped__",
                "Accounting Changes": "Restatements → Other Equity Adjustments",
                "Noncontrolling Interest": "If separate line → __unmapped__",
            },
            "Sign Conventions": {
                "Increases to Equity": "Net income +, stock issuance +, OCI gains +",
                "Decreases to Equity": "Dividends -, buybacks -, OCI losses -",
            },
        },
    },
}
